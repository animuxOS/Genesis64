<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:t="http://www.participatorypolitics.org/"
      xmlns:i18n="http://www.participatoryculture.org/i18n"
			eventCookie="@@@eventCookie@@@" dtvPlatform="@@@dtvPlatform@@@">  

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link href="resource:css/video-info.css" rel="stylesheet" type="text/css" />
    <t:execOnLoad><![CDATA[
this = app.controller.videoInfoItem
thisItemView = views.items.filter(lambda x: x.getID() == this.getID())
]]></t:execOnLoad>
    <t:execOnUnload><![CDATA[
app.controller.videoInfoItem = None
thisItemView.unlink()
]]></t:execOnUnload>
    <t:include filename="dynamic.js" />
</head>
<body>
<div id="videodetails-container">
<div t:updateForView="thisItemView">
<div id="videodetails-actions">
     <div  t:showIf="this.hasSharableURL()">
        <a href="#" onclick="return recommendItem('@@@this.getTitle()@@@', '@@@this.getURL()@@@', '@@@this.getFeed().getURL()@@@');"><span i18n:translate="">EMAIL A FRIEND</span></a>
     </div>
     <div t:showIf="this.getLink()">
        <a href="***this.getLink()***"><span i18n:translate="">PERMALINK</span></a>
     </div>
     <div>
        <span t:showIf="this.getExpiring()"><span class="expiration" t:replace="this.getExpirationString()" /></span>
        <span t:showIf="this.showSaveButton()">
	  <a href="#" onclick="return eventURL('action:keepItem?item=@@@this.getID()@@@');"><span i18n:translate="">KEEP</span></a> 
	</span>
        <span t:showIf="this.getFeedURL() == u'dtv:singleFeed'">
	  <a href="#" onclick="return eventURL('action:addItemToLibrary?item=@@@this.getID()@@@');"><span i18n:translate="">ADD TO LIBRARY</span></a> 
	</span>
        <span t:hideIf="this.getFeedURL() == u'dtv:singleFeed'">
        <span t:showIf="this.showSaveButton()"> - </span>
	  <a href="#" onclick="return eventURL('action:expirePlayingItem?item=@@@this.getID()@@@');"><span i18n:translate="">DELETE</span></a>
        </span>
      </div>
</div>
</div>
	<div id="videodetails-channeltitle">
        <h1 t:replace="this.getTitle()" /> 
        <h2 t:replace="this.getFeed().getTitle()" />
        <h3 t:replaceMarkup="this.getPaymentHTML()" />
	</div>
	<div id="videodetails-ad">
	    <span t:replaceMarkup="this.getAd()" />
	</div>
</div>
</body>

</html>
